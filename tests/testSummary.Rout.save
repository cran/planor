
R version 3.0.1 (2013-05-16) -- "Good Sport"
Copyright (C) 2013 The R Foundation for Statistical Computing
Platform: x86_64-unknown-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> # tests de la fonction summary
> library("planor")
Loading required package: conf.design
Loaded planor 0.2.0

> ### Creation of a "listofdesignkeys" object
> K0 <- planor.designkey(factors=c("R","C","U","A","B1","B2"),
+   nlevels=c(3,2,2,3,2,2), model=~R*C + (A+B1+B2)^2, estimate=~A:B1+A:B2,
+   nunits=12, base=~R+C+U, max.sol=2)
Preliminary step 1 : processing the model specifications
Preliminary step 2 : performing prime decompositions on the factors
Solution for p = 2 
Solution for p = 2 
Solution for p = 2 
Solution for p = 2 
Solution for p = 3 
Solution for p = 3 
The search is closed: max.sol =  2 solutions found 
Warning message:
In planor.modelterms(model) :
  The estimate formula 2 contains at least one interaction without all its marginal terms.
 Such marginal terms may be unestimable in the final design.

> ## Method summary applied on a "keymatrix" object
> r <- summary(K0[[1]][[1]])
DESIGN KEY MATRIX
  C U B1 B2
C 1 0  0  1
U 0 1  1  1

TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
1 = U B1
1 = C U B2
1 = C B1 B2

BLOCK-and-TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
nil

WEIGHT PROFILES
Treatment effects confounded with the mean: 2^1 3^2 
Treatment effects confounded with block effects: none 
Treatment pseudo-effects confounded with the mean: 2^1 3^2 
Treatment pseudo-effects confounded with block effects: none

> print(r)
$k
   B1 B2
C   0  1
U   1  1
B1  1  0
B2  0  1

> ## Method summary applied on a "designkey"  object
> summary(K0[1], save=NULL)

********** Prime  2  design **********

DESIGN KEY MATRIX
  C U B1 B2
C 1 0  0  1
U 0 1  1  1

TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
1 = U B1
1 = C U B2
1 = C B1 B2

BLOCK-and-TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
nil

WEIGHT PROFILES
Treatment effects confounded with the mean: 2^1 3^2 
Treatment effects confounded with block effects: none 
Treatment pseudo-effects confounded with the mean: 2^1 3^2 
Treatment pseudo-effects confounded with block effects: none


********** Prime  3  design **********

DESIGN KEY MATRIX
  R A
R 1 1

TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
1 = R^2  A

BLOCK-and-TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
nil

WEIGHT PROFILES
Treatment effects confounded with the mean: 2^1 
Treatment effects confounded with block effects: none 
Treatment pseudo-effects confounded with the mean: 2^1 
Treatment pseudo-effects confounded with block effects: none

> # Method summary applied on the "listofdesignkeys" object
> r <-summary(K0, show="dt")

********** Solution 1 **********
--- Solution 1 for prime 2  ---

DESIGN KEY MATRIX
  C U B1 B2
C 1 0  0  1
U 0 1  1  1

TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
1 = U B1
1 = C U B2
1 = C B1 B2


--- Solution 1 for prime 3  ---

DESIGN KEY MATRIX
  R A
R 1 1

TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
1 = R^2  A



********** Solution 2 **********
--- Solution 2 for prime 2  ---

DESIGN KEY MATRIX
  C U B1 B2
C 1 0  0  1
U 0 1  1  1

TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
1 = U B1
1 = C U B2
1 = C B1 B2


--- Solution 2 for prime 3  ---

DESIGN KEY MATRIX
  R A
R 1 2

TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
1 = R A


> print(r)
$`Solution 1`
$`Solution 1`$`Solution 1 for prime 2`
$`Solution 1`$`Solution 1 for prime 2`$k
   B1 B2
C   0  1
U   1  1
B1  1  0
B2  0  1

$`Solution 1`$`Solution 1 for prime 2`$w
     Treatment effects confounded with the mean 
                                      "2^1 3^2" 
Treatment effects confounded with block effects 
                                         "none" 


$`Solution 1`$`Solution 1 for prime 3`
$`Solution 1`$`Solution 1 for prime 3`$k
  A
R 2
A 1

$`Solution 1`$`Solution 1 for prime 3`$w
     Treatment effects confounded with the mean 
                                          "2^1" 
Treatment effects confounded with block effects 
                                         "none" 



$`Solution 2`
$`Solution 2`$`Solution 2 for prime 2`
$`Solution 2`$`Solution 2 for prime 2`$k
   B1 B2
C   0  1
U   1  1
B1  1  0
B2  0  1

$`Solution 2`$`Solution 2 for prime 2`$w
     Treatment effects confounded with the mean 
                                      "2^1 3^2" 
Treatment effects confounded with block effects 
                                         "none" 


$`Solution 2`$`Solution 2 for prime 3`
$`Solution 2`$`Solution 2 for prime 3`$k
  A
R 1
A 1

$`Solution 2`$`Solution 2 for prime 3`$w
     Treatment effects confounded with the mean 
                                          "2^1" 
Treatment effects confounded with block effects 
                                         "none" 



> ### Creation of a "listofkeyrings" object
> K0 <- planor.designkey(factors=c(LETTERS[1:4], "block"), nlevels=rep(3,5),
+    model=~block+(A+B+C+D)^2, estimate=~A+B+C+D,
+    nunits=3^3, base=~A+B+C, max.sol=2)
Preliminary step 1 : processing the model specifications
Preliminary step 2 : performing prime decompositions on the factors
Main step for prime p = 3 : key-matrix search
  => search for columns 4 to 5 
      first visit to column 4 
      first visit to column 5 
The search is closed: max.sol =  2 solution(s) found 
> # Method summary applied on the "keymatrix" object
> r <-summary(K0[[1]][[1]])
DESIGN KEY MATRIX
  A B C D block
A 1 0 0 1     1
B 0 1 0 1     1
C 0 0 1 1     0

TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
1 = A^2  B^2  block
1 = C^2  D block^2 
1 = A^2  B^2  C^2  D
1 = A B C^2  D block

BLOCK-and-TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
nil

WEIGHT PROFILES
Treatment effects confounded with the mean: 3^2 4^1 5^1 
Treatment effects confounded with block effects: none 
Treatment pseudo-effects confounded with the mean: 3^2 4^1 5^1 
Treatment pseudo-effects confounded with block effects: none

> print(r)
$k
      D block
A     2     2
B     2     2
C     2     0
D     1     0
block 0     1

> ## Method summary applied on the "keyring" object
> r <-summary(K0[[1]])

********** Prime  3  design **********

--- Solution  1  ---

TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
1 = A^2  B^2  block
1 = C^2  D block^2 
1 = A^2  B^2  C^2  D
1 = A B C^2  D block

BLOCK-and-TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
nil

WEIGHT PROFILES
Treatment effects confounded with the mean: 3^2 4^1 5^1 
Treatment effects confounded with block effects: none 
Treatment pseudo-effects confounded with the mean: 3^2 4^1 5^1 
Treatment pseudo-effects confounded with block effects: none

--- Solution  2  ---

TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
1 = A B^2  block
1 = A^2  B^2  C^2  D
1 = A C^2  D block^2 
1 = B C^2  D block

BLOCK-and-TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
nil

WEIGHT PROFILES
Treatment effects confounded with the mean: 3^1 4^3 
Treatment effects confounded with block effects: none 
Treatment pseudo-effects confounded with the mean: 3^1 4^3 
Treatment pseudo-effects confounded with block effects: none

> print(r)
$`Solution 1`
$`Solution 1`$k
      D block
A     2     2
B     2     2
C     2     0
D     1     0
block 0     1

$`Solution 1`$w
     Treatment effects confounded with the mean 
                                  "3^2 4^1 5^1" 
Treatment effects confounded with block effects 
                                         "none" 


$`Solution 2`
$`Solution 2`$k
      D block
A     2     1
B     2     2
C     2     0
D     1     0
block 0     1

$`Solution 2`$w
     Treatment effects confounded with the mean 
                                      "3^1 4^3" 
Treatment effects confounded with block effects 
                                         "none" 


> ## Method summary applied on the "listofkeyrings" object
> r <- summary(K0, show="dtb", save ="k")

********** Prime  3  design **********

--- Solution  1  for prime  3  ---

DESIGN KEY MATRIX
  A B C D block
A 1 0 0 1     1
B 0 1 0 1     1
C 0 0 1 1     0

TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
1 = A^2  B^2  block
1 = C^2  D block^2 
1 = A^2  B^2  C^2  D
1 = A B C^2  D block

BLOCK-and-TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
nil


--- Solution  2  for prime  3  ---

DESIGN KEY MATRIX
  A B C D block
A 1 0 0 1     2
B 0 1 0 1     1
C 0 0 1 1     0

TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
1 = A B^2  block
1 = A^2  B^2  C^2  D
1 = A C^2  D block^2 
1 = B C^2  D block

BLOCK-and-TREATMENT EFFECTS CONFOUNDED WITH THE MEAN
nil


> print(r)
$`Solution 1`
$`Solution 1`$`Solution 1 for prime 3`
$`Solution 1`$`Solution 1 for prime 3`$k
      D block
A     2     2
B     2     2
C     2     0
D     1     0
block 0     1


$`Solution 1`$`Solution 2 for prime 3`
$`Solution 1`$`Solution 2 for prime 3`$k
      D block
A     2     1
B     2     2
C     2     0
D     1     0
block 0     1



> 
> proc.time()
   user  system elapsed 
  0.844   0.037   0.873 
